<% content_for :title, "Pricing - AI Talk Coach" %>

<div class="pricing-page" style="min-height: 100vh; background: var(--bg); padding: 4rem 1rem;">
  <div style="max-width: 1000px; margin: 0 auto;">

    <!-- Header -->
    <div style="text-align: center; margin-bottom: 3rem;">
      <h1 class="grad-text" style="font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem;">
        Choose Your Plan
      </h1>
      <p style="font-size: 1.125rem; color: var(--muted); max-width: 600px; margin: 0 auto;">
        Start with a free trial. Keep it going by practicing daily!
      </p>
    </div>

    <!-- Free Forever Explanation Banner -->
    <div class="card" style="padding: 1.5rem; margin-bottom: 2rem; border-left: 4px solid var(--brand-500); background: linear-gradient(135deg, #FFF5F0, #FFFFFF);">
      <div>
        <h3 style="font-weight: 700; color: var(--text); margin-bottom: 0.5rem;">
          Go Potentially Free Forever!
        </h3>
        <p style="color: var(--muted); font-size: 0.9rem; margin-bottom: 0;">
          Start with 24 hours of free access. Practice for just 1+ minute daily to extend your trial by another 24 hours.
          <strong style="color: var(--text);">Keep practicing daily, and you'll never need to pay!</strong>
          Or subscribe anytime for guaranteed access.
        </p>
      </div>
    </div>

    <% if logged_in? && @trial_hours_remaining %>
      <!-- Trial Status Banner -->
      <div class="card" style="padding: 1.5rem; margin-bottom: 2rem; border-left: 4px solid var(--brand-500); background: linear-gradient(135deg, #FFF5F0, #FFFFFF);">
        <div style="display: flex; align-items: center; gap: 1rem;">
          <span style="font-size: 2rem;">⏰</span>
          <div style="flex: 1;">
            <h3 style="font-weight: 700; color: var(--text); margin-bottom: 0.25rem;">
              Free Trial Active
            </h3>
            <p style="color: var(--muted); font-size: 0.9rem;">
              <%= @trial_hours_remaining %> hours remaining • Practice daily (1+ min session) to keep using the app free forever!
            </p>
          </div>
        </div>
      </div>
    <% end %>

    <!-- Pricing Cards -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 3rem;">

      <!-- Monthly Plan -->
      <div class="card" style="padding: 2.5rem; position: relative; transition: transform 0.2s, box-shadow 0.2s;">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.5rem;">
          <div>
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">
              Monthly Plan
            </h2>
            <div style="display: flex; align-items: baseline; gap: 0.5rem;">
              <span style="font-size: 3rem; font-weight: 800; color: var(--brand-500);">
                €<%= @monthly_price %>
              </span>
              <span style="color: var(--muted);">/month</span>
            </div>
          </div>
        </div>

        <ul style="list-style: none; margin-bottom: 2rem; color: var(--text);">
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span><strong>Free forever if you practice daily (1+ min/day)</strong></span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Unlimited speech analysis sessions</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Advanced AI-powered coaching insights</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Progress tracking & analytics</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Priority processing</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Email support</span>
          </li>
        </ul>

        <% if logged_in? %>
          <%= button_to 'Subscribe Monthly', subscription_path(plan: :monthly), method: :post, class: 'primary-btn', style: 'width: 100%; padding: 1rem; font-size: 1.125rem; font-weight: 600; border-radius: 12px; border: none; cursor: pointer; background: var(--gradient-primary); color: white; text-decoration: none; display: block; text-align: center;', form: { data: { turbo: false } } %>
        <% else %>
          <%= link_to 'Sign Up & Subscribe', signup_path, class: 'primary-btn', style: 'width: 100%; padding: 1rem; font-size: 1.125rem; font-weight: 600; border-radius: 12px; border: none; cursor: pointer; background: var(--gradient-primary); color: white; text-decoration: none; display: block; text-align: center;' %>
        <% end %>
      </div>

      <!-- Yearly Plan (Recommended) -->
      <div class="card" style="padding: 2.5rem; position: relative; border: 2px solid var(--brand-500); transition: transform 0.2s, box-shadow 0.2s;">
        <!-- Recommended Badge -->
        <div style="position: absolute; top: -12px; right: 24px; background: var(--gradient-primary); color: white; padding: 0.5rem 1.5rem; border-radius: 20px; font-weight: 700; font-size: 0.875rem; box-shadow: 0 4px 12px rgba(255, 140, 66, 0.3);">
          BEST VALUE
        </div>

        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.5rem;">
          <div>
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">
              Yearly Plan
            </h2>
            <div style="display: flex; align-items: baseline; gap: 0.5rem;">
              <span style="font-size: 3rem; font-weight: 800; color: var(--brand-500);">
                €<%= @yearly_price %>
              </span>
              <span style="color: var(--muted);">/year</span>
            </div>
            <p style="color: var(--brand-500); font-weight: 600; margin-top: 0.5rem;">
              Just €<%= @yearly_monthly_equivalent %>/month • Save <%= @savings_percentage %>%!
            </p>
          </div>
        </div>

        <ul style="list-style: none; margin-bottom: 2rem; color: var(--text);">
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span><strong>Free forever if you practice daily (1+ min/day)</strong></span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span><strong>Everything in Monthly</strong></span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span><strong>Save €60 per year</strong> (50% off)</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Lock in your price for 12 months</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Priority support</span>
          </li>
        </ul>

        <% if logged_in? %>
          <%= button_to 'Subscribe Yearly', subscription_path(plan: :yearly), method: :post, class: 'primary-btn', style: 'width: 100%; padding: 1rem; font-size: 1.125rem; font-weight: 600; border-radius: 12px; border: none; cursor: pointer; background: var(--gradient-primary); color: white; text-decoration: none; display: block; text-align: center;', form: { data: { turbo: false } } %>
        <% else %>
          <%= link_to 'Sign Up & Subscribe', signup_path, class: 'primary-btn', style: 'width: 100%; padding: 1rem; font-size: 1.125rem; font-weight: 600; border-radius: 12px; border: none; cursor: pointer; background: var(--gradient-primary); color: white; text-decoration: none; display: block; text-align: center;' %>
        <% end %>
      </div>

      <!-- Coach Plan (Enterprise) -->
      <div class="card" style="padding: 2.5rem; position: relative; transition: transform 0.2s, box-shadow 0.2s;">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.5rem;">
          <div>
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">
              Coach Plan
            </h2>
            <div style="display: flex; align-items: baseline; gap: 0.5rem;">
              <span style="font-size: 2rem; font-weight: 700; color: var(--brand-500);">
                Custom
              </span>
            </div>
            <p style="color: var(--muted); font-size: 0.9rem; margin-top: 0.5rem;">
              Tailored for coaches & institutions
            </p>
          </div>
        </div>

        <ul style="list-style: none; margin-bottom: 2rem; color: var(--text);">
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span><strong>Everything in standard plans</strong></span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Coach functionalities</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Enhanced reports</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 1rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Customize features for your course</span>
          </li>
          <li style="display: flex; align-items: start; gap: 0.75rem;">
            <span style="color: var(--success); font-size: 1.25rem; line-height: 1;">✓</span>
            <span>Dedicated support</span>
          </li>
        </ul>

        <%= link_to 'Talk to Us', 'mailto:zsottomayor@gmail.com?subject=AI%20Talk%20Coach%20-%20Coach%20Plan%20Inquiry', class: 'primary-btn', style: 'width: 100%; padding: 1rem; font-size: 1.125rem; font-weight: 600; border-radius: 12px; border: none; cursor: pointer; background: var(--gradient-primary); color: white; text-decoration: none; display: block; text-align: center;' %>
      </div>
    </div>

    <!-- FAQs or Back Link -->
    <div style="text-align: center; margin-top: 3rem;">
      <%= link_to '← Back to Home', root_path, style: 'color: var(--brand-500); text-decoration: none; font-weight: 600;' %>
    </div>
  </div>
</div>

<style>
  .primary-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(255, 140, 66, 0.3);
  }

  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
  }

  @media (min-width: 992px) {
    .pricing-page > div > div:nth-child(3) {
      grid-template-columns: repeat(3, 1fr);
    }
  }
</style>
